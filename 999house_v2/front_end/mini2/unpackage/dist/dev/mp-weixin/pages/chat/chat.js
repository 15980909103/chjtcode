(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/chat/chat"],{318:
/*!**********************************************************************************!*\
  !*** D:/code/999house_v2/front_end/mini2/main.js?{"page":"pages%2Fchat%2Fchat"} ***!
  \**********************************************************************************/
/*! no static exports found */function(t,e,n){"use strict";(function(t){n(/*! uni-pages */4);o(n(/*! vue */2));var e=o(n(/*! ./pages/chat/chat.vue */319));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */1)["createPage"])},319:
/*!***************************************************************!*\
  !*** D:/code/999house_v2/front_end/mini2/pages/chat/chat.vue ***!
  \***************************************************************/
/*! no static exports found */function(t,e,n){"use strict";n.r(e);var o=n(/*! ./chat.vue?vue&type=template&id=bf16e7f4&scoped=true& */320),i=n(/*! ./chat.vue?vue&type=script&lang=js& */322);for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);n(/*! ./chat.vue?vue&type=style&index=0&id=bf16e7f4&lang=scss&scoped=true& */324);var a,s=n(/*! ../../../../../../软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js */13),u=Object(s["default"])(i["default"],o["render"],o["staticRenderFns"],!1,null,"bf16e7f4",null,!1,o["components"],a);u.options.__file="pages/chat/chat.vue",e["default"]=u.exports},320:
/*!**********************************************************************************************************!*\
  !*** D:/code/999house_v2/front_end/mini2/pages/chat/chat.vue?vue&type=template&id=bf16e7f4&scoped=true& ***!
  \**********************************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */function(t,e,n){"use strict";n.r(e);var o=n(/*! -!../../../../../../软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!../../../../../../软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!../../../../../../软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./chat.vue?vue&type=template&id=bf16e7f4&scoped=true& */321);n.d(e,"render",(function(){return o["render"]})),n.d(e,"staticRenderFns",(function(){return o["staticRenderFns"]})),n.d(e,"recyclableRender",(function(){return o["recyclableRender"]})),n.d(e,"components",(function(){return o["components"]}))},321:
/*!**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!D:/code/999house_v2/front_end/mini2/pages/chat/chat.vue?vue&type=template&id=bf16e7f4&scoped=true& ***!
  \**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */function(t,e,n){"use strict";var o;n.r(e),n.d(e,"render",(function(){return i})),n.d(e,"staticRenderFns",(function(){return a})),n.d(e,"recyclableRender",(function(){return r})),n.d(e,"components",(function(){return o}));try{o={uButton:function(){return n.e(/*! import() | uview-ui/components/u-button/u-button */"uview-ui/components/u-button/u-button").then(n.bind(null,/*! @/uview-ui/components/u-button/u-button.vue */504))},uImage:function(){return n.e(/*! import() | uview-ui/components/u-image/u-image */"uview-ui/components/u-image/u-image").then(n.bind(null,/*! @/uview-ui/components/u-image/u-image.vue */678))},uLoadmore:function(){return n.e(/*! import() | uview-ui/components/u-loadmore/u-loadmore */"uview-ui/components/u-loadmore/u-loadmore").then(n.bind(null,/*! @/uview-ui/components/u-loadmore/u-loadmore.vue */561))}}}catch(s){if(-1===s.message.indexOf("Cannot find module")||-1===s.message.indexOf(".vue"))throw s;console.error(s.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var i=function(){var t=this,e=t.$createElement,n=(t._self._c,t.__get_style([t.haveVal?{width:0,padding:0}:{width:"82rpx",padding:"0 14rpx"}])),o=t.__map(t.list,(function(e,n){var o=t.__get_orig(e),i=t.$api.imgDirtoUrl(e.send_head),r=1!=e.msg_type?t.$api.imgDirtoUrl(e.msg_url):null,a=1!=e.msg_type?t.$api.imgDirtoUrl(e.msg_url):null;return{$orig:o,g0:i,g1:r,g2:a}}));t._isMounted||(t.e0=function(e){t.val=e.detail.value}),t.$mp.data=Object.assign({},{$root:{s0:n,l0:o}})},r=!1,a=[];i._withStripped=!0},322:
/*!****************************************************************************************!*\
  !*** D:/code/999house_v2/front_end/mini2/pages/chat/chat.vue?vue&type=script&lang=js& ***!
  \****************************************************************************************/
/*! no static exports found */function(t,e,n){"use strict";n.r(e);var o=n(/*! -!../../../../../../软件/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib!../../../../../../软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!../../../../../../软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!../../../../../../软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./chat.vue?vue&type=script&lang=js& */323),i=n.n(o);for(var r in o)"default"!==r&&function(t){n.d(e,t,(function(){return o[t]}))}(r);e["default"]=i.a},323:
/*!***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!D:/code/999house_v2/front_end/mini2/pages/chat/chat.vue?vue&type=script&lang=js& ***!
  \***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(t,e,n){"use strict";(function(t){function n(t){return a(t)||r(t)||i(t)||o()}function o(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(t,e){if(t){if("string"===typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(t,e):void 0}}function r(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function a(t){if(Array.isArray(t))return s(t)}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u={data:function(){return{id:-1,to_uid:-1,otherName:"",screenHeight:0,pageShow:!1,loadShow:!1,val:"",moreShow:!1,wrapTransform:0,wrapPadding:100,myfocus:!1,screenMove:!1,adjust:!0,list:[],page:0,maxPage:1}},components:{},watch:{list:function(t){}},computed:{haveVal:function(){var t=this,e=this.$u.trim(this.val);return e=""!=e,this.pageShow&&this.$u.getRect(".action").then((function(e){var n=2*e.height;t.wrapPadding!=n&&(t.wrapPadding=n,t.wrapPadding>n||setTimeout((function(){t.scrollNewText()}),50))})),e}},onLoad:function(t){this.init(t)},onShow:function(){},methods:{init:function(e){var n=this;this.id=e.id,this.otherName=e.name,this.to_uid=e.to_uid,t.setNavigationBarTitle({title:e.name}),t.getSystemInfo({success:function(t){n.screenHeight||(n.screenHeight=t.windowHeight)}}),this.getData()},getData:function(t){var e=this,o=this.page;o++,t&&1!=o&&this.loadShow||this.$http.post("chat/getChatListBYDialogueId",{dialogue_id:this.id,type:"up",page:o,pageSize:20}).then((function(i){var r,a=i.data.list;e.page=i.data.current_page,e.maxPage=i.data.last_page,t&&t(),(r=e.list).push.apply(r,n(a)),1==o&&(setTimeout((function(){e.scrollNewText()}),300),e.listenNewTalk()),setTimeout((function(){e.page<e.maxPage&&(e.loadShow=!0)}),300)}))},listenNewTalk:function(){var e=this;t.$on("some_talk_detail",(function(n){console.log(n,1111),0==e.id&&(e.id=n.chat_dialogue_id,t.$emit("refFriends")),e.id&&e.id==n.chat_dialogue_id&&(e.list.unshift(n),t.sendSocketMessage({data:JSON.stringify({url:"wliao/Index/setMsgStatus",dialogue_id:e.id})}))}))},scrollNewText:function(){var e=this;this.$u.getRect(".wrap").then((function(n){var o=n.height;t.pageScrollTo({scrollTop:o,duration:0}),e.$nextTick((function(){e.pageShow=!0}))}))},send:function(e){if(e||this.haveVal){var n=this,o={url:"wliao/Index/usertouser",msg_type:e?2:1,to_user_id:n.to_uid,send_msg:e?"":n.val,msg_url:e||"",group_id:0};t.sendSocketMessage({data:JSON.stringify(o),success:function(o){console.log(o),t.$emit("some_talk",{id:n.id,val:e?"":n.val,type:e?2:1})},fail:function(e){t.$emit("socketErr"),console.log(JSON.stringify(e),777),n.$toast("服务器异常，请检查网络后重试",JSON.stringify(e))}}),this.val="",this.closeMore(),this.scrollNewText()}},showMore:function(){var t=this;this.$u.getRect(".wrap").then((function(e){var n=e.height;t.moreShow=!t.moreShow,n>=t.screenHeight-148&&(t.wrapTransform=t.moreShow?196:0)}))},closeMore:function(t){this.myfocus=this.moreShow=!1,this.wrapTransform=0},onFocus:function(){this.myfocus=!0,this.scrollNewText()},choosePic:function(e){var n=this,o=1==e?"album":"camera";t.chooseImage({sourceType:o,success:function(e){console.log(e),e.tempFiles.map((function(e){t.uploadFile({url:getApp().globalData.host_api+"/upload/imgUpload",name:"image",filePath:e.path,complete:function(t){var e=JSON.parse(t.data);if(e&&1==e.code){var o=e.data.info.url;n.send(o)}else n.$toast("图片上传失败")}})}))}})},lookPic:function(e){e=this.$api.imgDirtoUrl(e),t.previewImage({urls:[e]})}},onPageScroll:function(e){var n=this;!this.loadShow||e.scrollTop>400||this.$u.debounce((function(){n.loadShow=!1,n.getData((function(){console.log(e.scrollTop),e.scrollTop<10&&t.pageScrollTo({scrollTop:10,duration:0})}))}),300)}};e.default=u}).call(this,n(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */1)["default"])},324:
/*!*************************************************************************************************************************!*\
  !*** D:/code/999house_v2/front_end/mini2/pages/chat/chat.vue?vue&type=style&index=0&id=bf16e7f4&lang=scss&scoped=true& ***!
  \*************************************************************************************************************************/
/*! no static exports found */function(t,e,n){"use strict";n.r(e);var o=n(/*! -!../../../../../../软件/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../软件/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-2!../../../../../../软件/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src??ref--8-oneOf-1-3!../../../../../../软件/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-5!../../../../../../软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!../../../../../../软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./chat.vue?vue&type=style&index=0&id=bf16e7f4&lang=scss&scoped=true& */325),i=n.n(o);for(var r in o)"default"!==r&&function(t){n.d(e,t,(function(){return o[t]}))}(r);e["default"]=i.a},325:
/*!***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!./node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-2!./node_modules/postcss-loader/src??ref--8-oneOf-1-3!./node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-5!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!D:/code/999house_v2/front_end/mini2/pages/chat/chat.vue?vue&type=style&index=0&id=bf16e7f4&lang=scss&scoped=true& ***!
  \***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(t,e,n){}},[[318,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/chat/chat.js.map