(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/lime-painter/index"],{668:
/*!*****************************************************************************!*\
  !*** D:/code/999house_v2/front_end/mini2/components/lime-painter/index.vue ***!
  \*****************************************************************************/
/*! no static exports found */function(e,t,n){"use strict";n.r(t);var r=n(/*! ./index.vue?vue&type=template&id=3806f0d1& */669),a=n(/*! ./index.vue?vue&type=script&lang=js& */671);for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);var u,s=n(/*! ../../../../../../软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js */13),o=Object(s["default"])(a["default"],r["render"],r["staticRenderFns"],!1,null,null,null,!1,r["components"],u);o.options.__file="components/lime-painter/index.vue",t["default"]=o.exports},669:
/*!************************************************************************************************************!*\
  !*** D:/code/999house_v2/front_end/mini2/components/lime-painter/index.vue?vue&type=template&id=3806f0d1& ***!
  \************************************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */function(e,t,n){"use strict";n.r(t);var r=n(/*! -!../../../../../../软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!../../../../../../软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!../../../../../../软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=3806f0d1& */670);n.d(t,"render",(function(){return r["render"]})),n.d(t,"staticRenderFns",(function(){return r["staticRenderFns"]})),n.d(t,"recyclableRender",(function(){return r["recyclableRender"]})),n.d(t,"components",(function(){return r["components"]}))},670:
/*!************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!D:/code/999house_v2/front_end/mini2/components/lime-painter/index.vue?vue&type=template&id=3806f0d1& ***!
  \************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */function(e,t,n){"use strict";var r;n.r(t),n.d(t,"render",(function(){return a})),n.d(t,"staticRenderFns",(function(){return u})),n.d(t,"recyclableRender",(function(){return i})),n.d(t,"components",(function(){return r}));var a=function(){var e=this,t=e.$createElement;e._self._c},i=!1,u=[];a._withStripped=!0},671:
/*!******************************************************************************************************!*\
  !*** D:/code/999house_v2/front_end/mini2/components/lime-painter/index.vue?vue&type=script&lang=js& ***!
  \******************************************************************************************************/
/*! no static exports found */function(e,t,n){"use strict";n.r(t);var r=n(/*! -!../../../../../../软件/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib!../../../../../../软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!../../../../../../软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!../../../../../../软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js& */672),a=n.n(r);for(var i in r)"default"!==i&&function(e){n.d(t,e,(function(){return r[e]}))}(i);t["default"]=a.a},672:
/*!*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!D:/code/999house_v2/front_end/mini2/components/lime-painter/index.vue?vue&type=script&lang=js& ***!
  \*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(n(/*! ./node_modules/@babel/runtime/regenerator */15)),a=n(/*! ./utils */673),i=n(/*! ./draw */674),u=n(/*! ./canvas */677);function s(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n,r,a,i,u){try{var s=e[i](u),o=s.value}catch(c){return void n(c)}s.done?t(o):Promise.resolve(o).then(r,a)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function u(e){o(i,r,a,u,s,"next",e)}function s(e){o(i,r,a,u,s,"throw",e)}u(void 0)}))}}var d={name:"l-painter",props:{board:Object,fileType:{type:String,default:"png"},width:[Number,String],height:[Number,String],pixelRatio:Number,customStyle:String,isRenderImage:Boolean,isBase64ToPath:Boolean,isH5PathToBase64:Boolean,sleep:{type:Number,default:1e3/30},type:{type:String,default:"2d"}},data:function(){return{canvasId:"l-painter",use2dCanvas:!0,draw:null,ctx:null}},computed:{newboard:function(){return this.board&&JSON.parse(JSON.stringify(this.board))},style:function(){return"width:".concat(this.boardWidth,"px; height: ").concat(this.boardHeight,"px; ").concat(this.customStyle)},dpr:function(){return this.pixelRatio||e.getSystemInfoSync().pixelRatio},boardWidth:function(){var e=this.board||{},t=e.width,n=void 0===t?200:t;return(0,a.toPx)(this.width||n)},boardHeight:function(){var e=this.board||{},t=e.height,n=void 0===t?200:t;return(0,a.toPx)(this.height||n)}},mounted:function(){var e=this,t=wx.getSystemInfoSync(),n=t.SDKVersion;this.use2dCanvas="2d"===this.type&&(0,a.compareVersion)(n,"2.9.2")>=0,this.$watch("newboard",function(){var t=c(r.default.mark((function t(n,a){var i,u,s,o,c,d;return r.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("{}"!==JSON.stringify(n)&&n){t.next=2;break}return t.abrupt("return");case 2:i=n||{},u=i.width,s=i.height,o=a||{},c=o.width,d=o.height,u===c&&s===d||(e.inited=!1),e.render();case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),{deep:!0,immediate:!0})},methods:{render:function(){var e=arguments,t=this;return c(r.default.mark((function n(){var u,s,o,d,f,l,h,p,v,w,m;return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return u=e.length>0&&void 0!==e[0]?e[0]:{},s=e.length>1&&void 0!==e[1]&&e[1],n.next=4,t.getContext();case 4:if(o=n.sent,d=t.use2dCanvas,f=t.boardWidth,l=t.boardHeight,h=t.board,p=t.canvas,v=t.isBase64ToPath,w=t.isH5PathToBase64,m=t.sleep,!d||p){n.next=8;break}return n.abrupt("return",Promise.reject(new Error("render: fail canvas has not been created")));case 8:if(t.boundary||(t.boundary={top:0,left:0,width:f,height:l,sleep:m}),s||o.clearRect(0,0,f,l),t.draw||(t.draw=new i.Draw(o,p,d,w,t.boundary)),!("{}"!=JSON.stringify(u)||h&&"{}"!=JSON.stringify(h))){n.next=14;break}return n.next=14,t.draw.drawBoard("{}"!=JSON.stringify(u)?u:h);case 14:return n.next=16,new Promise((function(e){return t.$nextTick(e)}));case 16:if(d||s){n.next=19;break}return n.next=19,t.canvasDraw(o);case 19:return t.$emit("done"),t.isRenderImage&&!s&&t.canvasToTempFilePath().then(function(){var e=c(r.default.mark((function e(n){var i;return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!/^data:image\/(\w+);base64/.test(n.tempFilePath)||!v){e.next=7;break}return e.next=3,(0,a.base64ToPath)(n.tempFilePath);case 3:i=e.sent,t.$emit("success",i),e.next=8;break;case 7:t.$emit("success",n.tempFilePath);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){t.$emit("fail",e),new Error(JSON.stringify(e)),console.error(JSON.stringify(e))})),n.abrupt("return",Promise.resolve({ctx:o,draw:t.draw}));case 22:case"end":return n.stop()}}),n)})))()},custom:function(e){var t=this;return c(r.default.mark((function n(){var a,i,u;return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.render({},!0);case 2:return a=n.sent,i=a.ctx,u=a.draw,i.save(),n.next=8,e(i,u);case 8:return i.restore(),n.abrupt("return",Promise.resolve(!0));case 10:case"end":return n.stop()}}),n)})))()},single:function(){var e=arguments,t=this;return c(r.default.mark((function n(){var a;return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.length>0&&void 0!==e[0]?e[0]:{},n.next=3,t.render(a,!0);case 3:return n.abrupt("return",Promise.resolve(!0));case 4:case"end":return n.stop()}}),n)})))()},canvasDraw:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.ctx;return new Promise((function(n){t.draw(e,(function(){n(!0)}))}))},getContext:function(){var t=this;return c(r.default.mark((function n(){var a,i,s,o,c,d;return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!t.ctx||!t.inited){n.next=2;break}return n.abrupt("return",Promise.resolve(t.ctx));case 2:if(a=t.type,i=t.use2dCanvas,s=t.dpr,o=t.boardWidth,c=t.boardHeight,d=function(){return new Promise((function(n){e.createSelectorQuery().in(t).select("#"+t.canvasId).boundingClientRect().exec((function(r){if(r){var a=e.createCanvasContext(t.canvasId,t);t.inited||(t.inited=!0,t.use2dCanvas=!1,t.canvas=r),t.ctx=a,n(a)}}))}))},i){n.next=7;break}return n.abrupt("return",d());case 7:return n.abrupt("return",new Promise((function(n){e.createSelectorQuery().in(t).select("#l-painter").node().exec((function(e){var r=e[0].node;if(!r)return t.use2dCanvas=!1,t.getContext();var i=r.getContext(a);t.inited||(t.inited=!0,r.width=o*s,r.height=c*s,t.use2dCanvas=!0,t.canvas=r,i.scale(s,s)),t.ctx=(0,u.adaptor)(i),n((0,u.adaptor)(i))}))})));case 8:case"end":return n.stop()}}),n)})))()},canvasToTempFilePath:function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=this.use2dCanvas,a=this.canvasId;return new Promise((function(i,u){var s=t.boundary||t,o=s.top,c=void 0===o?0:o,d=s.left,f=void 0===d?0:d,l=s.width,h=s.height,p=l*t.dpr,v=h*t.dpr,w={x:f,y:c,width:l,height:h,destWidth:p,destHeight:v,canvasId:a,fileType:n.fileType||t.fileType,quality:n.quality||1,success:i,fail:u};r&&(delete w.canvasId,w.canvas=t.canvas),e.canvasToTempFilePath(w,t)}))}}};t.default=d}).call(this,n(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */1)["default"])}}]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/components/lime-painter/index.js.map
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/lime-painter/index-create-component',
    {
        'components/lime-painter/index-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('1')['createComponent'](__webpack_require__(668))
        })
    },
    [['components/lime-painter/index-create-component']]
]);
