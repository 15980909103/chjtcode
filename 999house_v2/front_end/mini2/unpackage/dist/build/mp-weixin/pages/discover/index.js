(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/discover/index"],{"2f52":function(t,e,a){"use strict";var n=a("9466"),i=a.n(n);i.a},"4d73":function(t,e,a){"use strict";a.r(e);var n=a("d413"),i=a.n(n);for(var r in n)"default"!==r&&function(t){a.d(e,t,(function(){return n[t]}))}(r);e["default"]=i.a},5257:function(t,e,a){"use strict";(function(t){a("e878");n(a("66fd"));var e=n(a("6967"));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,a("543d")["createPage"])},6967:function(t,e,a){"use strict";a.r(e);var n=a("d45e"),i=a("4d73");for(var r in i)"default"!==r&&function(t){a.d(e,t,(function(){return i[t]}))}(r);a("2f52");var o,s=a("f0c5"),c=Object(s["a"])(i["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],o);e["default"]=c.exports},9466:function(t,e,a){},d413:function(t,e,a){"use strict";function n(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function i(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?n(Object(a),!0).forEach((function(e){r(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function r(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function o(t){return g(t)||u(t)||c(t)||s()}function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(t,e){if(t){if("string"===typeof t)return l(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?l(t,e):void 0}}function u(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function g(t){if(Array.isArray(t))return l(t)}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=new Array(e);a<e;a++)n[a]=t[a];return n}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var f=function(){a.e("components/common/template_information").then(function(){return resolve(a("9940"))}.bind(null,a)).catch(a.oe)},h=function(){a.e("components/common/tag").then(function(){return resolve(a("b97d"))}.bind(null,a)).catch(a.oe)},m=function(){a.e("components/common/template_newHouse").then(function(){return resolve(a("6f0c"))}.bind(null,a)).catch(a.oe)},d={data:function(){return{webviewStyles:"false",navActive:0,navList:[],tag:0,activeList:[],page:0,maxPage:2,loading:!0,finished:!1,chartActive:0,chart:0,cate_id:0,city_no:0}},components:{commonInformation:f,commontag:h,commonNewhouse:m},created:function(){this.city_no=getApp().getCurrentCity().city_no,this.getNavList()},onShow:function(){},methods:{init:function(){this.activeList=[],this.page=0,this.maxPage=2,this.loading=!0,this.finished=!1},getNavList:function(){var t=this;this.$http.post("/news/getColumnList").then((function(e){if(1==e.code){var a=e.data,n=[];a.map((function(t){var e={};e.id=t.id,e.name=t.name,t.children&&t.children.length>0&&(e.tag=[],t.children.map((function(t){var a={};a.id=t.id,a.name=t.name,e.tag.push(a)}))),n.push(e)})),t.navList=n,t.$nextTick((function(){t.onLoads()}))}})).catch((function(e){t.$toast(e.msg)}))},initActive:function(t){var e=this,a=this.$api.funcUrlDel().option;a.active&&t.map((function(t,n){t.name==a.active&&(e.navActive=n)}))},navChange:function(t){this.tag=0,this.navActive=t,this.init(),this.onLoads()},tagChange:function(t){this.tag=t,this.init(),this.onLoads()},chartChange:function(t){if(this.chartActive!=t.target.dataset.id){var e=0==t.target.dataset.id?this.navList[this.navActive].chartList[this.tag].halfYear:this.navList[this.navActive].chartList[this.tag].year;this.chartActive=t.target.dataset.id,this.chart.changeData(e)}},chartCreat:function(t,e,a){var n=this,i={fontSize:11,fontWeight:500};console.log(e),n.chart=new F2.Chart({id:t,appendPadding:[15,0,0,0],pixelRatio:window.devicePixelRatio}),n.chart.source(e,{value:{tickCount:5,alias:"均价",formatter:function(t){return parseInt(t)+"万"}},data:{type:"timeCat",mask:"YYYY-MM",range:[.1,.9],tickCount:6}}),n.chart.axis("data",{label:i,labelOffset:12}).axis("value",{label:i}),n.chart.tooltip({showTitle:!0,offsetY:30,offsetX:35,background:{radius:2,fill:"rgba(0, 0, 0, .3)",padding:[6,10]},nameStyle:{fill:"#fff"},showItemMarker:!1}),n.chart.line().position("data*value").color("rgba(254, 130, 30, 1)"),n.chart.render()},onLoads:function(){var t=this;if(1!=this.finished){var e=this.navList[this.navActive],a=e.id,n=this.page+1,i=[];if(n>this.maxPage)return this.loading=!1,void(this.finished=!0);if(9==a||13==a||19==a){var r=e.tag?e.tag[this.tag].id:a,s={pid:a,cate_id:r,city_no:this.city_no,page:n};19==a&&this.getChartList(),this.$http.post("/news/getNewsList",s).then((function(e){var a=e.data;if(t.cate_id=r,0==a.length)t.finished=!0;else{if(t.page=a.current_page,t.maxPage=a.last_page,t.page==t.maxPage&&(t.finished=!0),a.ad_lsit.length>0){var n=0;a.list.map((function(e,r){if(i.push(e),(r+1)%6==3){var o=a.ad_lsit[n];o=t.formatAdv(o),o&&(i.push(o),n++)}}))}else i=a.list;t.activeList=[].concat(o(t.activeList),o(i))}t.loading=!1}))}else if(18==a){var c={city_no:this.city_no,recommend:1,page_size:6,page:n};this.$http.post("/estates/getEstatesList",c).then((function(e){e.data.list;var a=[];t.$api.localStore.localGet("u-tag");console.log(e),t.page=e.data.current_page,t.maxPage=e.data.last_page,t.page==t.maxPage&&(t.finished=!0),a=t.$api.createHouseList(e.data,1),t.activeList=[].concat(o(t.activeList),o(a)),t.loading=!1}))}}},getHousesList:function(){},getChartList:function(){var t=this,e=new Date;e=this.format(e);var a={city:this.city_no,date:e,is_chart_list:1};this.$http.post("/news/getInstituteList",a).then((function(e){var a=e.data,n=a.info,r={market:{title:n.city_no_name,time:n.show_time+"月份",average:n.price,lastMonth:{type:1,num:n.last_month_rate},lastYear:{type:0,num:n.last_year_rate},opening:n.recent_opening,sale:n.on_sale,sold:n.deal},averageMonth:n.show_time,averagePrice:n.city_price},o={city:n.city_no_name,chartList:[{halfYear:a.char_6,year:a.char_12}]};t.$set(t.navList[t.navActive].tag,t.tag,i(i({},t.navList[t.navActive].tag[t.tag]),r)),t.$set(t.navList,t.navActive,i(i({},t.navList[t.navActive]),o)),t.$nextTick((function(){t.chartCreat(t.$refs.myChart[0],t.navList[t.navActive].chartList[t.tag].halfYear)}))}))},format:function(t,e){e||(e="yyyy-MM-dd");var a={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};for(var n in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length))),a)new RegExp("("+n+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?a[n]:("00"+a[n]).substr((""+a[n]).length)));return e},formatAdv:function(t){if(t){t&&!t.href&&t.info&&(t.href="houses/index.html?id="+t.info.estate_id+"&cover="+t.cover);var e=[],a=[];if(t&&t.info){t.info;if(e=e.concat($api.getTagsText("estatesnew_sale_status",t.info.sale_status)),e=e.concat($api.getTagsText("house_purpose",t.info.house_purpose)),t.info.feature_tag&&(e=e.concat($api.getTagsText("feature_tag",t.info.feature_tag))),t.info.tip=e,t.info.lab){var n=t.info.lab;for(var i in n){var r=n[i];"discount"==r.type&&(r.type=1,a.push({name:r.title,type:r.type})),"hot"==r.type&&(r.type=0,a.push({name:r.title,type:r.type}))}}t.info.lab=a}return t}}}};e.default=d},d45e:function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return r})),a.d(e,"a",(function(){return n}));var n={uTabs:function(){return Promise.all([a.e("common/vendor"),a.e("uview-ui/components/u-tabs/u-tabs")]).then(a.bind(null,"f2ba"))}},i=function(){var t=this,e=t.$createElement,a=(t._self._c,t.__map(t.navList,(function(e,a){var n=t.__get_orig(e),i="研究院"==e.name&&e.tag[t.tag]&&e.tag[t.tag].market&&e.tag[t.tag].market.lastMonth.num?e.tag[t.tag].market.lastMonth.num.slice(0,-1):null,r="研究院"==e.name&&e.tag[t.tag]&&e.tag[t.tag].market&&e.tag[t.tag].market.lastMonth.num?e.tag[t.tag].market.lastMonth.num.indexOf("-"):null,o="研究院"==e.name&&e.tag[t.tag]&&e.tag[t.tag].market&&e.tag[t.tag].market.lastMonth.num&&-1!=r?e.tag[t.tag].market.lastMonth.num.slice(1,e.tag[t.tag].market.lastMonth.num.length):null,s="研究院"==e.name&&e.tag[t.tag]&&e.tag[t.tag].market&&e.tag[t.tag].market.lastYear.num?e.tag[t.tag].market.lastYear.num.slice(0,-1):null,c="研究院"==e.name&&e.tag[t.tag]&&e.tag[t.tag].market&&e.tag[t.tag].market.lastYear.num?e.tag[t.tag].market.lastYear.num.indexOf("-"):null,u="研究院"==e.name&&e.tag[t.tag]&&e.tag[t.tag].market&&e.tag[t.tag].market.lastYear.num&&-1!=c?e.tag[t.tag].market.lastYear.num.slice(1,e.tag[t.tag].market.lastYear.num.length):null;return{$orig:n,g0:i,g1:r,g2:o,g3:s,g4:c,g5:u}})));t._isMounted||(t.e0=function(e){t.activeList=e},t.e1=function(e){t.activeList=e}),t.$mp.data=Object.assign({},{$root:{l0:a}})},r=[]}},[["5257","common/runtime","common/vendor"]]]);