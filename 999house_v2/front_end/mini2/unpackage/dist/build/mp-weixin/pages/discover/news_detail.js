(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/discover/news_detail"],{"384f":function(t,e,n){"use strict";var o=n("3c81"),i=n.n(o);i.a},"3c81":function(t,e,n){},"43a8":function(t,e,n){"use strict";(function(t){n("e878");o(n("66fd"));var e=o(n("fec6"));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},4888:function(t,e,n){"use strict";n.r(e);var o=n("b54b"),i=n.n(o);for(var r in o)"default"!==r&&function(t){n.d(e,t,(function(){return o[t]}))}(r);e["default"]=i.a},"85ba":function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return o}));var o={mpHtml:function(){return Promise.all([n.e("common/vendor"),n.e("components/mp-html/mp-html")]).then(n.bind(null,"f4ae"))},uButton:function(){return n.e("uview-ui/components/u-button/u-button").then(n.bind(null,"ad7e"))}},i=function(){var t=this,e=t.$createElement,o=(t._self._c,!t.pageShow||!t.content.id||t.replyList&&t.replyList.length?null:t.$api.imgDirtoUrl("/my/default.png")),i=t.pageShow&&!t.content.id?n("221f"):null;t._isMounted||(t.e0=function(e){t.adList=e},t.e1=function(e){t.replyPop=!0},t.e2=function(e){t.recommendList=e},t.e3=function(e){t.replyPop=!1}),t.$mp.data=Object.assign({},{$root:{g0:o,m0:i}})},r=[]},b54b:function(t,e,n){"use strict";(function(t){function o(t){return c(t)||a(t)||r(t)||i()}function i(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function r(t,e){if(t){if("string"===typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(t,e):void 0}}function a(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function c(t){if(Array.isArray(t))return s(t)}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=getApp(),l=function(){n.e("components/common/like").then(function(){return resolve(n("77d8"))}.bind(null,n)).catch(n.oe)},f=function(){n.e("components/common/template_information").then(function(){return resolve(n("9940"))}.bind(null,n)).catch(n.oe)},d=function(){n.e("components/discover/reply").then(function(){return resolve(n("1e87"))}.bind(null,n)).catch(n.oe)},m=function(){n.e("components/discover/reply_box").then(function(){return resolve(n("bc66"))}.bind(null,n)).catch(n.oe)},p=function(){Promise.all([n.e("common/vendor"),n.e("components/mp-html/mp-html")]).then(function(){return resolve(n("f4ae"))}.bind(null,n)).catch(n.oe)},h={data:function(){return{pageShow:!1,showRecommendMore:!0,domainurl:"",focuss:!1,content:{id:0,isWrite:1,title:"",time:"",head:"",name:"",text:"",read:0,like:0,favorite:0,likeStatus:0,comeUrl:""},city_no:0,adList:[],replyList:[],replyPop:!1,text:"",pid:"",cate_id:"",id:"",recommendList:[],recommendList_limitNum:5,recommendLoad:!1,recommendMore:!0,safeBottom:0}},onLoad:function(e){console.log("uni.getSystemInfoSync().safeAreaInsets",t.getSystemInfoSync().safeAreaInsets),this.safeBottom=t.getSystemInfoSync().safeAreaInsets.bottom,this.pid=Number(e.pid),this.cate_id=Number(e.cate_id),this.id=Number(e.id),this.domainurl=u.globalData.host,this.getInfo()},components:{commonLike:l,commonInformation:f,discoverReply:d,discoverReplyBox:m,mpHtml:p},methods:{recommendLoadMore:function(){this.recommendList_limitNum=10,this.showRecommendMore=!1},getInfo:function(){var t=this;this.pid&&this.cate_id&&this.id||this.$toast("该文章呗删除了哦！");var e=this;this.$http.post("/news/getArticleInfo",{pid:this.pid,cate_id:this.cate_id,id:this.id}).then((function(n){if(1==n.code){e.content=n.data.info,n.data.adv&&(n.data.adv=t.formatAdv(n.data.adv),e.adList=[n.data.adv]),e.replyList=n.data.replyList,e.recommendList=n.data.recommend;var o=e.recommendList;o.forEach((function(t,n){t.img instanceof Array?t.img&&t.img.length>0&&t.img.forEach((function(t,e){o[n]["img"][e]=this.$api.imgDirtoUrl(t)})):o[n]["url"]=e.$api.imgDirtoUrl(t.url)})),e.recommendList=o}e.pageShow=!0})).catch((function(t){e.pageShow=!0}))},likeSome:function(t){var e=this;this.alertLogin();this.$http.post("/news/addFabulous",{pid:this.pid,cate_id:this.cate_id,id:this.id}).then((function(t){1==t.code&&1==t.code&&(e.$toast(1==t.data.is_fabulous?"点赞成功":"取消点赞"),e.content.likeStatus=Number(t.data.is_fabulous),1==e.content.likeStatus?e.content.like++:e.content.like--)})).catch((function(t){e.$toast(t.msg)}))},replylikeSome:function(t){this.$set(this.replyList[t.index],"lik",t.num)},replySome:function(t){this.$refs.replyBox.replySome(t)},sendSome:function(t){var e=this,n=t.option,i=t.obj;0==n.pid?this.replyList.unshift(i):this.replyList.map((function(t,r){t.id==n.pid&&e.$set(e.replyList[r],"reply",[].concat(o(e.replyList[r]["reply"]),[i]))}))},inputfocus:function(){this.focuss=!0},formatAdv:function(t){t&&!t.href&&t.info&&(t.href="houses/index?id="+t.info.estate_id+"&cover="+t.cover);var e=[],n=[];if(t&&t.info){t.info;if(e=e.concat(this.$api.getTagsText("estatesnew_sale_status",t.info.sale_status)),e=e.concat(this.$api.getTagsText("house_purpose",t.info.house_purpose)),t.info.feature_tag&&(e=e.concat(this.$api.getTagsText("feature_tag",t.info.feature_tag))),t.info.tip=e,t.info.lab&&t.info.lab.length>0){var o=t.info.lab;for(var i in o){var r=o[i];"discount"==r.type&&(r.type=1,n.push({name:r.title,type:r.type})),"hot"==r.type&&(r.type=0,n.push({name:r.title,type:r.type}))}}t.info.lab=n}return t}}};e.default=h}).call(this,n("543d")["default"])},fec6:function(t,e,n){"use strict";n.r(e);var o=n("85ba"),i=n("4888");for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);n("384f");var a,c=n("f0c5"),s=Object(c["a"])(i["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],a);e["default"]=s.exports}},[["43a8","common/runtime","common/vendor"]]]);