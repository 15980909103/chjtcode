(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/chat/chat"],{"6f09":function(t,e,n){},"8bf1":function(t,e,n){"use strict";var o=n("6f09"),i=n.n(o);i.a},"9a63":function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return o}));var o={uButton:function(){return n.e("uview-ui/components/u-button/u-button").then(n.bind(null,"ad7e"))},uImage:function(){return n.e("uview-ui/components/u-image/u-image").then(n.bind(null,"9fcc"))},uLoadmore:function(){return n.e("uview-ui/components/u-loadmore/u-loadmore").then(n.bind(null,"9375"))}},i=function(){var t=this,e=t.$createElement,n=(t._self._c,t.__get_style([t.haveVal?{width:0,padding:0}:{width:"82rpx",padding:"0 14rpx"}])),o=t.__map(t.list,(function(e,n){var o=t.__get_orig(e),i=t.$api.imgDirtoUrl(e.send_head),a=1!=e.msg_type?t.$api.imgDirtoUrl(e.msg_url):null;return{$orig:o,g0:i,g1:a}}));t._isMounted||(t.e0=function(e){t.val=e.detail.value}),t.$mp.data=Object.assign({},{$root:{s0:n,l0:o}})},a=[]},"9ef9":function(t,e,n){"use strict";n.r(e);var o=n("a6d1"),i=n.n(o);for(var a in o)"default"!==a&&function(t){n.d(e,t,(function(){return o[t]}))}(a);e["default"]=i.a},"9f6e":function(t,e,n){"use strict";(function(t){n("e878");o(n("66fd"));var e=o(n("e7fc"));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},a6d1:function(t,e,n){"use strict";(function(t){function n(t){return r(t)||a(t)||i(t)||o()}function o(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(t,e){if(t){if("string"===typeof t)return u(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(t,e):void 0}}function a(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function r(t){if(Array.isArray(t))return u(t)}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var c={data:function(){return{id:-1,otherName:"",screenHeight:0,pageShow:!1,loadShow:!1,val:"",moreShow:!1,wrapTransform:0,wrapPadding:100,myfocus:!1,screenMove:!1,adjust:!0,list:[],page:0,maxPage:1}},components:{},watch:{list:function(t){}},computed:{haveVal:function(){var t=this,e=this.$u.trim(this.val);return e=""!=e,this.pageShow&&this.$u.getRect(".action").then((function(e){var n=2*e.height;t.wrapPadding!=n&&(t.wrapPadding=n,t.wrapPadding>n||setTimeout((function(){t.scrollNewText()}),50))})),e}},onLoad:function(t){this.init(t)},onShow:function(){},methods:{init:function(e){var n=this;this.id=e.id,this.otherName=e.name,t.setNavigationBarTitle({title:e.name}),t.getSystemInfo({success:function(t){n.screenHeight||(n.screenHeight=t.windowHeight)}}),this.getData()},getData:function(t){var e=this,o=this.page;o++,t&&1!=o&&this.loadShow||this.$http.post("chat/getChatListBYDialogueId",{dialogue_id:this.id,page:o,pageSize:20}).then((function(i){var a,r=i.data.list;e.page=i.data.current_page,e.maxPage=i.data.last_page,t&&t(),console.log(i.data),(a=e.list).push.apply(a,n(r)),1==o&&setTimeout((function(){e.scrollNewText()}),300),setTimeout((function(){e.page<e.maxPage&&(e.loadShow=!0)}),300)}))},scrollNewText:function(){var e=this;this.$u.getRect(".wrap").then((function(n){var o=n.height;t.pageScrollTo({scrollTop:o,duration:0}),e.$nextTick((function(){e.pageShow=!0}))}))},send:function(){if(this.haveVal){var t={type:1,head:"../../static/logo.png",text:this.val};this.list.unshift(t),this.val="",this.scrollNewText()}},showMore:function(){var t=this;this.$u.getRect(".wrap").then((function(e){var n=e.height;t.moreShow=!t.moreShow,n>=t.screenHeight-148&&(t.wrapTransform=t.moreShow?196:0)}))},closeMore:function(t){console.log(11),this.myfocus=this.moreShow=!1,this.wrapTransform=0},onFocus:function(){this.myfocus=!0,this.scrollNewText()}},onPageScroll:function(e){var n=this;!this.loadShow||e.scrollTop>400||this.$u.debounce((function(){n.loadShow=!1,n.getData((function(){console.log(e.scrollTop),e.scrollTop<10&&t.pageScrollTo({scrollTop:10,duration:0})}))}),300)}};e.default=c}).call(this,n("543d")["default"])},e7fc:function(t,e,n){"use strict";n.r(e);var o=n("9a63"),i=n("9ef9");for(var a in i)"default"!==a&&function(t){n.d(e,t,(function(){return i[t]}))}(a);n("8bf1");var r,u=n("f0c5"),c=Object(u["a"])(i["default"],o["b"],o["c"],!1,null,"6462337a",null,!1,o["a"],r);e["default"]=c.exports}},[["9f6e","common/runtime","common/vendor"]]]);