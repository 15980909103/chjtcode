(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-discover-index"],{"1cb9":function(t,a,e){"use strict";e.r(a);var i=e("5468"),n=e("2d24");for(var s in n)"default"!==s&&function(t){e.d(a,t,(function(){return n[t]}))}(s);e("b8f6");var c,o=e("f0c5"),r=Object(o["a"])(n["default"],i["b"],i["c"],!1,null,"2ad9cd12",null,!1,i["a"],c);a["default"]=r.exports},"2d24":function(t,a,e){"use strict";e.r(a);var i=e("e7c7"),n=e.n(i);for(var s in i)"default"!==s&&function(t){e.d(a,t,(function(){return i[t]}))}(s);a["default"]=n.a},5468:function(t,a,e){"use strict";e.d(a,"b",(function(){return n})),e.d(a,"c",(function(){return s})),e.d(a,"a",(function(){return i}));var i={uTabs:e("b6e3").default},n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-uni-view",{staticClass:"content"},[e("v-uni-view",{staticStyle:{position:"relative","z-index":"999"}},[e("i",{staticClass:"iconfont icon901",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.goPage("discover/search")}}})]),e("u-tabs",{attrs:{list:t.navList,"is-scroll":!1,current:t.navActive,"active-color":"#FE821E"},on:{change:function(a){arguments[0]=a=t.$handleEvent(a),t.navChange.apply(void 0,arguments)}}}),e("van-tabs",{staticClass:"tabs",attrs:{sticky:!0},on:{change:function(a){arguments[0]=a=t.$handleEvent(a),t.navChange.apply(void 0,arguments)}},model:{value:t.navActive,callback:function(a){t.navActive=a},expression:"navActive"}},t._l(t.navList,(function(a,i){return e("van-tab",{directives:[{name:"show",rawName:"v-show",value:t.navActive==i,expression:"navActive == index"}],key:i,attrs:{title:a.name}},["资讯"==a.name?e("div",{staticClass:"tag"},[e("commontag",{attrs:{list:a.tag,tag:t.tag,"margin-right":"0.6rem",cancel:!1,bg:!0},on:{change:function(a){arguments[0]=a=t.$handleEvent(a),t.tagChange.apply(void 0,arguments)}}})],1):t._e(),"研究院"==a.name&&a.tag[t.tag]&&a.tag[t.tag].market?e("div",{staticClass:"market"},[e("div",{staticClass:"market-wrap"},[e("div",{staticClass:"market-left",style:{backgroundImage:"url(../../static/index/bg.png)"}},[e("span",{staticClass:"market-title"},[t._v(t._s(a.tag[t.tag].market.title))]),e("span",[t._v(t._s(a.tag[t.tag].market.time))])]),e("div",{staticClass:"market-right"},[e("div",{staticClass:"market-right-top"},[e("div",[e("p",[e("span",[t._v(t._s(a.tag[t.tag].market.average))]),t._v("元/m²")]),e("span",[t._v("成交均价")])]),a.tag[t.tag].market.lastMonth.num?e("div",[e("p",[e("i",{staticClass:"iconfont",class:[a.tag[t.tag].market.lastMonth.num.slice(0,-1)<0?"iconFill1beifen11":"iconFill1beifen12"]}),t._v(t._s(-1==a.tag[t.tag].market.lastMonth.num.indexOf("-")?a.tag[t.tag].market.lastMonth.num:a.tag[t.tag].market.lastMonth.num.slice(1,a.tag[t.tag].market.lastMonth.num.length)))]),e("span",[t._v("比上月")])]):t._e(),a.tag[t.tag].market.lastYear.num?e("div",[e("p",[e("i",{staticClass:"iconfont",class:[a.tag[t.tag].market.lastYear.num.slice(0,-1)<0?"iconFill1beifen11":"iconFill1beifen12"]}),t._v(t._s(-1==a.tag[t.tag].market.lastYear.num.indexOf("-")?a.tag[t.tag].market.lastYear.num:a.tag[t.tag].market.lastYear.num.slice(1,a.tag[t.tag].market.lastYear.num.length)))]),e("span",[t._v("比去年")])]):t._e()]),e("div",{class:[0==t.tag?"market-right-bottom":"market-right-bottom2"]},[0==t.tag?[e("div",[e("p",[t._v(t._s(a.tag[t.tag].market.opening))]),e("span",[t._v("近期开盘(个)")])]),e("div",[e("p",[t._v(t._s(a.tag[t.tag].market.sale))]),e("span",[t._v("在售楼盘(个)")])]),e("div",[e("p",[t._v(t._s(a.tag[t.tag].market.sold))]),e("span",[t._v("成交套数(套)")])])]:[e("p",[t._v(t._s(a.tag[t.tag].market.attitude))]),e("div",[e("div",[t._v("市场情绪")]),e("span",{staticClass:"van-ellipsis"},[t._v(t._s(a.tag[t.tag].market.tip))])])]],2)])]),1==t.tag?e("div",{staticClass:"market-tip"},[t._v("近3个月上涨天数"+t._s(a.tag[t.tag].market.state.up)+"天, 下跌天数"+t._s(a.tag[t.tag].market.state.down)+"天, 累计"),e("span",[t._v(t._s(a.tag[t.tag].market.state.state))])]):t._e()]):t._e(),"研究院"==a.name?e("div",{staticClass:"chart"},[e("div",{staticClass:"chart-top"},[e("span",{staticClass:"chart-title"},[t._v("成交价格走势")]),e("div",{on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.chartChange.apply(void 0,arguments)}}},[e("span",{class:[0==t.chartActive?"text-active":""],attrs:{"data-id":"0"}},[t._v("近半年")]),e("span",{class:[1==t.chartActive?"text-active":""],attrs:{"data-id":"1"}},[t._v("近一年")])])]),e("div",{staticClass:"chart-tip"},[t._v(t._s(a.city)+"均价(万/m²)")]),e("v-uni-canvas",{ref:"myChart",refInFor:!0,staticClass:"myChart"})],1):t._e(),"研究院"==a.name&&a.tag[t.tag]&&a.tag[t.tag].averageMonth&&a.tag[t.tag].averagePrice?e("div",{staticClass:"average"},[e("h4",{staticClass:"average-title"},[t._v(t._s(a.tag[t.tag].averageMonth)+"月区域均价")]),e("div",{staticClass:"average-wrap"},t._l(a.tag[t.tag].averagePrice,(function(a,i){return e("div",{key:i,staticClass:"average-box"},[e("div",{staticClass:"average-item"},[e("div",{staticClass:"average-top"},[e("span",[t._v(t._s(a.name))]),e("span",[e("i",{staticClass:"iconfont",class:[0==a.type?"iconFill1beifen11":"",1==a.type?"iconFill1beifen12":""]}),t._v(t._s(0==a.type||1==a.type?a.num:"持平"))])]),e("div",{staticClass:"average-bottom"},[e("span",[t._v(t._s(a.price))]),e("p",[t._v("元/m²")])])])])})),0)]):t._e(),"资讯"==a.name?e("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:function(a){arguments[0]=a=t.$handleEvent(a),t.onLoads.apply(void 0,arguments)}},model:{value:t.loading,callback:function(a){t.loading=a},expression:"loading"}},[e("common-information",{attrs:{list:t.activeList},on:{del:function(a){arguments[0]=a=t.$handleEvent(a),function(a){t.activeList=a}.apply(void 0,arguments)}}})],1):t._e(),"选好房"==a.name?e("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:function(a){arguments[0]=a=t.$handleEvent(a),t.onLoads.apply(void 0,arguments)}},model:{value:t.loading,callback:function(a){t.loading=a},expression:"loading"}},[e("common-newhouse",{attrs:{list:t.activeList},on:{del:function(a){arguments[0]=a=t.$handleEvent(a),function(a){t.activeList=a}.apply(void 0,arguments)}}})],1):t._e()],1)})),1)],1)},s=[]},aa9c:function(t,a,e){var i=e("24fb");a=i(!1),a.push([t.i,".icon901[data-v-2ad9cd12]{width:%?125?%;height:44px;background:-webkit-linear-gradient(left,hsla(0,0%,100%,.24),#fff);background:linear-gradient(90deg,hsla(0,0%,100%,.24),#fff);position:absolute;right:0;top:0;z-index:999;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;font-size:%?34?%}.tag[data-v-2ad9cd12]{margin:%?30?% 0 0}",""]),t.exports=a},b7f6:function(t,a,e){var i=e("aa9c");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=e("4f06").default;n("046a8571",i,!0,{sourceMap:!1,shadowMode:!1})},b8f6:function(t,a,e){"use strict";var i=e("b7f6"),n=e.n(i);n.a},e7c7:function(t,a,e){"use strict";(function(t){var i=e("4ea4");e("99af"),e("d81d"),e("e25e"),e("4d63"),e("ac1f"),e("25f0"),e("5319"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var n=i(e("5530")),s=i(e("2909")),c=i(e("4f4d")),o=i(e("93af")),r=i(e("9a6f")),l={data:function(){return{webviewStyles:"false",navActive:0,navList:[],tag:0,activeList:[],page:0,maxPage:2,loading:!0,finished:!1,chartActive:0,chart:0,cate_id:0,city_no:0}},components:{commonInformation:c.default,commontag:o.default,commonNewhouse:r.default},created:function(){this.city_no=getApp().getCurrentCity().city_no,this.getNavList()},onShow:function(){},methods:{init:function(){this.activeList=[],this.page=0,this.maxPage=2,this.loading=!0,this.finished=!1},getNavList:function(){var t=this;this.$http.post("/news/getColumnList").then((function(a){if(1==a.code){var e=a.data,i=[];e.map((function(t){var a={};a.id=t.id,a.name=t.name,t.children&&t.children.length>0&&(a.tag=[],t.children.map((function(t){var e={};e.id=t.id,e.name=t.name,a.tag.push(e)}))),i.push(a)})),t.navList=i,t.$nextTick((function(){t.onLoads()}))}})).catch((function(a){t.$toast(a.msg)}))},initActive:function(t){var a=this,e=this.$api.funcUrlDel().option;e.active&&t.map((function(t,i){t.name==e.active&&(a.navActive=i)}))},navChange:function(t){this.tag=0,this.navActive=t,this.init(),this.onLoads()},tagChange:function(t){this.tag=t,this.init(),this.onLoads()},chartChange:function(t){if(this.chartActive!=t.target.dataset.id){var a=0==t.target.dataset.id?this.navList[this.navActive].chartList[this.tag].halfYear:this.navList[this.navActive].chartList[this.tag].year;this.chartActive=t.target.dataset.id,this.chart.changeData(a)}},chartCreat:function(a,e,i){var n=this,s={fontSize:11,fontWeight:500};t.log(e),n.chart=new F2.Chart({id:a,appendPadding:[15,0,0,0],pixelRatio:window.devicePixelRatio}),n.chart.source(e,{value:{tickCount:5,alias:"均价",formatter:function(t){return parseInt(t)+"万"}},data:{type:"timeCat",mask:"YYYY-MM",range:[.1,.9],tickCount:6}}),n.chart.axis("data",{label:s,labelOffset:12}).axis("value",{label:s}),n.chart.tooltip({showTitle:!0,offsetY:30,offsetX:35,background:{radius:2,fill:"rgba(0, 0, 0, .3)",padding:[6,10]},nameStyle:{fill:"#fff"},showItemMarker:!1}),n.chart.line().position("data*value").color("rgba(254, 130, 30, 1)"),n.chart.render()},onLoads:function(){var a=this;if(1!=this.finished){var e=this.navList[this.navActive],i=e.id,n=this.page+1,c=[];if(n>this.maxPage)return this.loading=!1,void(this.finished=!0);if(9==i||13==i||19==i){var o=e.tag?e.tag[this.tag].id:i,r={pid:i,cate_id:o,city_no:this.city_no,page:n};19==i&&this.getChartList(),this.$http.post("/news/getNewsList",r).then((function(t){var e=t.data;if(a.cate_id=o,0==e.length)a.finished=!0;else{if(a.page=e.current_page,a.maxPage=e.last_page,a.page==a.maxPage&&(a.finished=!0),e.ad_lsit.length>0){var i=0;e.list.map((function(t,n){if(c.push(t),(n+1)%6==3){var s=e.ad_lsit[i];s=a.formatAdv(s),s&&(c.push(s),i++)}}))}else c=e.list;a.activeList=[].concat((0,s.default)(a.activeList),(0,s.default)(c))}a.loading=!1}))}else if(18==i){var l={city_no:this.city_no,recommend:1,page_size:6,page:n};this.$http.post("/estates/getEstatesList",l).then((function(e){e.data.list;var i=[];a.$api.localStore.localGet("u-tag");t.log(e),a.page=e.data.current_page,a.maxPage=e.data.last_page,a.page==a.maxPage&&(a.finished=!0),i=a.$api.createHouseList(e.data,1),a.activeList=[].concat((0,s.default)(a.activeList),(0,s.default)(i)),a.loading=!1}))}}},getHousesList:function(){},getChartList:function(){var t=this,a=new Date;a=this.format(a);var e={city:this.city_no,date:a,is_chart_list:1};this.$http.post("/news/getInstituteList",e).then((function(a){var e=a.data,i=e.info,s={market:{title:i.city_no_name,time:i.show_time+"月份",average:i.price,lastMonth:{type:1,num:i.last_month_rate},lastYear:{type:0,num:i.last_year_rate},opening:i.recent_opening,sale:i.on_sale,sold:i.deal},averageMonth:i.show_time,averagePrice:i.city_price},c={city:i.city_no_name,chartList:[{halfYear:e.char_6,year:e.char_12}]};t.$set(t.navList[t.navActive].tag,t.tag,(0,n.default)((0,n.default)({},t.navList[t.navActive].tag[t.tag]),s)),t.$set(t.navList,t.navActive,(0,n.default)((0,n.default)({},t.navList[t.navActive]),c)),t.$nextTick((function(){t.chartCreat(t.$refs.myChart[0],t.navList[t.navActive].chartList[t.tag].halfYear)}))}))},format:function(t,a){a||(a="yyyy-MM-dd");var e={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};for(var i in/(y+)/.test(a)&&(a=a.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length))),e)new RegExp("("+i+")").test(a)&&(a=a.replace(RegExp.$1,1==RegExp.$1.length?e[i]:("00"+e[i]).substr((""+e[i]).length)));return a},formatAdv:function(t){if(t){t&&!t.href&&t.info&&(t.href="houses/index.html?id="+t.info.estate_id+"&cover="+t.cover);var a=[],e=[];if(t&&t.info){t.info;if(a=a.concat($api.getTagsText("estatesnew_sale_status",t.info.sale_status)),a=a.concat($api.getTagsText("house_purpose",t.info.house_purpose)),t.info.feature_tag&&(a=a.concat($api.getTagsText("feature_tag",t.info.feature_tag))),t.info.tip=a,t.info.lab){var i=t.info.lab;for(var n in i){var s=i[n];"discount"==s.type&&(s.type=1,e.push({name:s.title,type:s.type})),"hot"==s.type&&(s.type=0,e.push({name:s.title,type:s.type}))}}t.info.lab=e}return t}}}};a.default=l}).call(this,e("5a52")["default"])}}]);